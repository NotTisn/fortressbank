spring:
  application:
    name: user-service-test
  
  # Database configured dynamically by Testcontainers
  jpa:
    hibernate:
      ddl-auto: validate
    show-sql: false
    properties:
      hibernate:
        format_sql: true
        dialect: org.hibernate.dialect.PostgreSQLDialect
  
  flyway:
    enabled: true
    baseline-on-migrate: true
    locations: classpath:db/migration
    baseline-version: 0
  
  # Redis configured dynamically by Testcontainers
  data:
    redis:
      timeout: 60000
  
  # RabbitMQ configured dynamically by Testcontainers
  rabbitmq:
    listener:
      simple:
        acknowledge-mode: auto
  
  # Disable mail for tests
  mail:
    host: localhost
    port: 1025
    username: test
    password: test
    properties:
      mail:
        smtp:
          auth: false
          starttls:
            enable: false
  
  # Disable cloud services
  cloud:
    config:
      enabled: false
      fail-fast: false
    discovery:
      enabled: false
  
  autoconfigure:
    exclude:
      - org.springframework.boot.autoconfigure.mail.MailSenderAutoConfiguration

# Mock Keycloak configuration
keycloak:
  auth-server-url: http://localhost:8080
  realm: test-realm
  client-id: test-client
  client-secret: test-secret

# Mock AI Service
fortress-bank:
  ai-service:
    url: http://localhost:5000

eureka:
  client:
    enabled: false

logging:
  level:
    com.uit.userservice: DEBUG
    org.springframework.security: WARN
    org.hibernate.SQL: DEBUG
    org.testcontainers: INFO
